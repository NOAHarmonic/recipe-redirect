<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weiterleitung zum Rezept...</title>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            // Rezept-Identifier aus der URL extrahieren
            let urlParams = new URLSearchParams(window.location.search);
            let recipeID = urlParams.get("id"); // Ändere auf "id" statt "recipeID"

            if (recipeID) {
                // Deep-Link ins korrekte Schema umwandeln
                let deepLink = `rezeptefuchs://recipe/${recipeID}`;

                // Versuche, den Deep-Link zu öffnen
                window.location.href = deepLink;

                // Falls die App nicht installiert ist, zeige den Fallback-Link
                setTimeout(() => {
                    document.getElementById("fallback").style.display = "block";
                    document.getElementById("fallback-link").href = deepLink;
                }, 2000);
            } else {
                console.error("❌ Kein gültiger Rezept-Identifier gefunden.");
            }
        });
    </script>
</head>
<body>
    <h1>Weiterleitung zum Rezept...</h1>
    <p>Falls du nicht weitergeleitet wirst, <a id="fallback-link" href="#">klicke hier</a>.</p>
    <div id="fallback" style="display:none;">
        <p>Die App scheint nicht installiert zu sein. Lade sie hier herunter:</p>
        <a href="https://apps.apple.com/de/app/rezeptefuchs/id123456789">App im App Store</a>
    </div>
</body>
</html>

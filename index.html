<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weiterleitung zum Rezept...</title>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            // Extrahiere die Rezept-ID aus der URL
            let path = window.location.pathname;
            let recipeID = path.split("/").pop();

            // Deep-Link in das korrekte Schema umwandeln
            let deepLink = `rezeptefuchs://recipe/${recipeID}`;

            // Versuche, den Deep-Link in die App zu Ã¶ffnen
            let openApp = setTimeout(() => {
                window.location.href = deepLink;
            }, 500);

            // Falls die App nicht installiert ist, zeige nach 2 Sekunden den Fallback-Link
            setTimeout(() => {
                document.getElementById("fallback").style.display = "block";
                document.getElementById("fallback-link").href = deepLink;
            }, 2000);

            // **Falls Deep-Link nicht funktioniert, leite zu Netlify-Seite weiter**
            setTimeout(() => {
                window.location.href = `https://ornate-biscochitos-f21530.netlify.app/web-recipe/${recipeID}`;
            }, 4000);
        });
    </script>
</head>
<body>
    <h1>Weiterleitung zum Rezept...</h1>
    <p>Falls du nicht weitergeleitet wirst, <a id="fallback-link" href="#">klicke hier</a>.</p>
    <div id="fallback" style="display:none;">
        <p>Die App scheint nicht installiert zu sein. Lade sie hier herunter:</p>
        <a href="https://apps.apple.com/de/app/rezeptefuchs/id123456789">App im App Store</a>
    </div>
</body>
</html>

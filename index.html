<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weiterleitung zum Rezept...</title>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            console.log("üìå Skript gestartet...");
            
            // Rezept-ID aus der URL extrahieren
            const urlParams = new URLSearchParams(window.location.search);
            const recipeID = urlParams.get("recipeID");

            if (recipeID) {
                console.log("üîó Rezept-ID gefunden:", recipeID);

                // Erstelle den Deep-Link zur App
                let deepLink = `rezeptefuchs://recipe/${recipeID}`;
                console.log("üöÄ Versuche die App zu √∂ffnen:", deepLink);

                // Versuche, die App zu √∂ffnen
                window.location.href = deepLink;

                // Falls die App nicht installiert ist, zeige den Fallback-Link nach 3 Sekunden
                setTimeout(() => {
                    console.warn("‚ö†Ô∏è App wurde nicht ge√∂ffnet. Zeige Fallback.");
                    document.getElementById("fallback").style.display = "block";
                    document.getElementById("fallback-link").href = deepLink;
                }, 3000);
            } else {
                console.error("‚ùå Keine Rezept-ID in der URL gefunden.");
                document.getElementById("error").style.display = "block";
            }
        });
    </script>
</head>
<body>
    <h1>Weiterleitung zum Rezept...</h1>
    <p>Falls du nicht weitergeleitet wirst, <a id="fallback-link" href="#">klicke hier</a>.</p>

    <div id="fallback" style="display:none;">
        <p>Die App scheint nicht installiert zu sein. Lade sie hier herunter:</p>
        <a href="https://apps.apple.com/de/app/rezeptefuchs/id123456789">App im App Store</a>
    </div>

    <div id="error" style="display:none; color: red;">
        <p>‚ùå Fehler: Keine Rezept-ID gefunden. Bitte √ºberpr√ºfe den Link.</p>
    </div>
</body>
</html>
